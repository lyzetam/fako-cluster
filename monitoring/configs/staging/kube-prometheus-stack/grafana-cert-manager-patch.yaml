apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: kube-prometheus-stack
  namespace: monitoring
spec:
  values:
    grafana:
      ingress:
        annotations:
          # Use cert-manager to automatically provision certificates
          cert-manager.io/cluster-issuer: "letsencrypt-production"
          # Optional: Use staging issuer for testing
          # cert-manager.io/cluster-issuer: "letsencrypt-staging"
        tls:
          - secretName: grafana-tls-cert
            hosts:
              - grafana.landryzetam.net
