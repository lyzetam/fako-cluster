apiVersion: newrelic.com/v1alpha2
kind: Instrumentation
metadata:
  name: newrelic-instrumentation-python
  namespace: nrdot-collector
spec:
  agent:
    language: python
    image: newrelic/newrelic-python-init:latest
  
  # Target namespaces with Python applications (MCP servers + voice pipeline)
  namespaceLabelSelector:
    matchExpressions:
      - key: "kubernetes.io/metadata.name"
        operator: "In"
        values: ["mcp-servers", "piper", "piper-v13", "whisper", "openwakeword"]
  
  # Target all pods with the app label
  podLabelSelector:
    matchExpressions:
      - key: "app"
        operator: "Exists"
