apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: zi-secrets
  namespace: zi
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: SecretStore
    name: aws-secret-store
  target:
    name: zi-secrets
    creationPolicy: Owner
  data:
    # Anthropic API key (same as autobots uses)
    - secretKey: anthropic-api-key
      remoteRef:
        key: family-manager-bot/anthropic
        property: api_key
    # Autobots API key for workflow orchestration
    - secretKey: autobots-api-key
      remoteRef:
        key: autobots/api-key
        property: api_key
    # OpenAI API key for vision/specialized tasks
    - secretKey: openai-api-key
      remoteRef:
        key: openai/api-key
        property: api_key
    # Discord bot token for zI interface
    - secretKey: discord-bot-token
      remoteRef:
        key: zi/discord
        property: bot_token
    # Discord allowed user IDs
    - secretKey: discord-allowed-users
      remoteRef:
        key: zi/discord
        property: allowed_users
    # Obsidian Local REST API
    - secretKey: obsidian-api-url
      remoteRef:
        key: obsidian/api
        property: api_url
    - secretKey: obsidian-api-key
      remoteRef:
        key: obsidian/api
        property: api_key
    # Social Network (autonomous agent conversations)
    - secretKey: social-enabled
      remoteRef:
        key: zi/social
        property: enabled
    - secretKey: social-channel-id
      remoteRef:
        key: zi/social
        property: channel_id
    - secretKey: social-webhook-url
      remoteRef:
        key: zi/social
        property: webhook_url
    # Cloudflare API token (agent tools)
    - secretKey: cloudflare-api-token
      remoteRef:
        key: cloudflare/api-token
    # Tradier API key (agent tools)
    - secretKey: tradier-api-key
      remoteRef:
        key: tradier/api-key
    # PostgreSQL credentials (agent tools)
    - secretKey: postgres-user
      remoteRef:
        key: postgres/admin-credentials
        property: username
    - secretKey: postgres-password
      remoteRef:
        key: postgres/admin-credentials
        property: password
