apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: zi-secrets
  namespace: zi
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: SecretStore
    name: aws-secret-store
  target:
    name: zi-secrets
    creationPolicy: Owner
  data:
    # AI provider API keys (ZI_ prefix for pydantic-settings)
    - secretKey: ZI_ANTHROPIC_API_KEY
      remoteRef:
        key: family-manager-bot/anthropic
        property: api_key
    - secretKey: ZI_OPENAI_API_KEY
      remoteRef:
        key: openai/api-key
        property: api_key
    # Autobots API key for workflow orchestration
    - secretKey: ZI_AUTOBOTS_API_KEY
      remoteRef:
        key: autobots/api-key
        property: api_key
    # Discord bot token for zI interface
    - secretKey: ZI_DISCORD_BOT_TOKEN
      remoteRef:
        key: zi/discord
        property: bot_token
    # Discord allowed user IDs
    - secretKey: ZI_DISCORD_ALLOWED_USERS
      remoteRef:
        key: zi/discord
        property: allowed_users
    # Obsidian Local REST API
    - secretKey: ZI_OBSIDIAN_API_URL
      remoteRef:
        key: obsidian/api
        property: api_url
    - secretKey: ZI_OBSIDIAN_API_KEY
      remoteRef:
        key: obsidian/api
        property: api_key
    # Social Network (autonomous agent conversations)
    - secretKey: ZI_SOCIAL_ENABLED
      remoteRef:
        key: zi/social
        property: enabled
    - secretKey: ZI_SOCIAL_CHANNEL_ID
      remoteRef:
        key: zi/social
        property: channel_id
    - secretKey: ZI_SOCIAL_WEBHOOK_URL
      remoteRef:
        key: zi/social
        property: webhook_url
    # Cloudflare API token (agent tools)
    - secretKey: ZI_CLOUDFLARE_API_TOKEN
      remoteRef:
        key: cloudflare/api-token
    # Tradier API key (agent tools)
    - secretKey: ZI_TRADIER_API_KEY
      remoteRef:
        key: tradier/api-key
    # PostgreSQL credentials (agent tools)
    - secretKey: ZI_POSTGRES_USER
      remoteRef:
        key: postgres/admin-credentials
        property: username
    - secretKey: ZI_POSTGRES_PASSWORD
      remoteRef:
        key: postgres/admin-credentials
        property: password
    # Composio API key (SaaS integrations)
    - secretKey: ZI_COMPOSIO_API_KEY
      remoteRef:
        key: composio/api-key
        property: api_key
    # Brain API key
    - secretKey: ZI_BRAIN_API_KEY
      remoteRef:
        key: zi/brain-api-key
        property: api_key
    # Discord webhook for CI/CD notifications
    - secretKey: DISCORD_WEBHOOK_URL
      remoteRef:
        key: discord/webhook
        property: ci_cd
