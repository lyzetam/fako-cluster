apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: nick-brothers-secrets
  namespace: nick-brothers
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secret-store
    kind: SecretStore
  target:
    name: nick-brothers-secrets
    creationPolicy: Owner
  data:
    # Supabase (shared FieldReady project)
    - secretKey: SUPABASE_URL
      remoteRef:
        key: fieldready/supabase
        property: url
    - secretKey: SUPABASE_SERVICE_KEY
      remoteRef:
        key: fieldready/supabase
        property: service_key
    # OpenAI (chat brain)
    - secretKey: OPENAI_API_KEY
      remoteRef:
        key: openai/api-keys
        property: api_key
    # Twilio (SMS, WhatsApp, Voice)
    - secretKey: TWILIO_ACCOUNT_SID
      remoteRef:
        key: twilio/account-sid
    - secretKey: TWILIO_AUTH_TOKEN
      remoteRef:
        key: twilio/auth-token
    # Anthropic (marketing agents)
    - secretKey: ANTHROPIC_API_KEY
      remoteRef:
        key: anthropic/api-key
        property: api_key
    # Nylas (email)
    - secretKey: NYLAS_API_KEY
      remoteRef:
        key: nylas/api-key
    - secretKey: NYLAS_GRANT_ID
      remoteRef:
        key: nylas/grant-id
    # Dashboard API key (auth for /leads + /agents)
    - secretKey: DASHBOARD_API_KEY
      remoteRef:
        key: nick-brothers/dashboard-api-key
