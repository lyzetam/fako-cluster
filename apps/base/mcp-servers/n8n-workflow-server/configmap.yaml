apiVersion: v1
kind: ConfigMap
metadata:
  name: n8n-workflow-server-src
  namespace: mcp-servers
  labels:
    app.kubernetes.io/name: n8n-workflow-server
    app.kubernetes.io/component: mcp-server
    app.kubernetes.io/part-of: mcp-servers
data:
  requirements.txt: |
    fastapi
    uvicorn[standard]
    aiofiles
    pydantic
    python-multipart
    
  run.py: |
    #!/usr/bin/env python3
    """
    Placeholder for the actual run.py from the n8n-workflows repository.
    The actual deployment should clone the repository and use the real files.
    """
    import uvicorn
    
    if __name__ == "__main__":
        # This would be replaced by the actual FastAPI app from the repo
        print("Starting n8n workflow library server...")
        print("Note: This requires the actual n8n-workflows repository to be cloned")
        uvicorn.run("api_server:app", host="0.0.0.0", port=8000, reload=False)
