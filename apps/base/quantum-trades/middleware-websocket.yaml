apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: websocket-headers
  namespace: quantum-trades
spec:
  headers:
    customRequestHeaders:
      X-Forwarded-Proto: "https"
    customResponseHeaders:
      X-WebSocket-Support: "true"
---
# ServersTransport for extended timeouts (WebSocket needs long-lived connections)
apiVersion: traefik.io/v1alpha1
kind: ServersTransport
metadata:
  name: websocket-transport
  namespace: quantum-trades
spec:
  # 30 minute response timeout for long-running scans
  forwardingTimeouts:
    dialTimeout: "30s"
    responseHeaderTimeout: "1800s"
    idleConnTimeout: "1800s"
