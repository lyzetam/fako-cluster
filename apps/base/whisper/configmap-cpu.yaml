# apps/base/whisper/configmap-cpu.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: whisper-cpu-configmap
  namespace: whisper
data:
  # Model configuration
  MODEL: "base"  # Using smaller model for CPU to balance performance/accuracy
  LANGUAGE: "en"
  COMPUTE_TYPE: "int8"  # Using int8 for CPU optimization
  BEAM_SIZE: "1"
  
  # Wyoming protocol settings
  WYOMING_URI: "tcp://0.0.0.0:10300"
  
  # Cache directory for models
  HF_HOME: "/data/.cache"
  TRANSFORMERS_CACHE: "/data/.cache"
  
  # Additional stability settings
  VAD_THRESHOLD: "0.5"
  MIN_SPEECH_DURATION_MS: "250"
  MAX_SPEECH_DURATION_S: "30"
  SPEECH_PAD_MS: "400"
  
  # CPU-specific optimizations
  THREADS: "8"  # Number of threads for CPU processing
  DEVICE: "cpu"  # Explicitly set to CPU
