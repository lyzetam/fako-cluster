apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: autobots-secrets
  namespace: autobots
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: SecretStore
    name: aws-secret-store
  target:
    name: autobots-secrets
    creationPolicy: Owner
  data:
    - secretKey: anthropic-api-key
      remoteRef:
        key: family-manager-bot/anthropic
        property: api_key
    # Discord webhook secrets for agent notifications
    - secretKey: discord-webhook-deployments
      remoteRef:
        key: discord/webhook
        property: deployments
    - secretKey: discord-webhook-ci-cd
      remoteRef:
        key: discord/webhook
        property: ci_cd
    - secretKey: discord-webhook-sre-alerts
      remoteRef:
        key: discord/webhook
        property: sre_alerts
    - secretKey: discord-webhook-security-alerts
      remoteRef:
        key: discord/webhook
        property: security_alerts
    # API authentication
    - secretKey: api-key
      remoteRef:
        key: autobots/api-key
        property: api_key
    # Supabase credentials for agent memory
    - secretKey: supabase-url
      remoteRef:
        key: autobots/supabase
        property: url
    - secretKey: supabase-service-role-key
      remoteRef:
        key: autobots/supabase
        property: service_role_key
