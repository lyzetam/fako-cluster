apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: meal-tracker-credentials
  namespace: meal-tracker
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secret-store
    kind: SecretStore
  target:
    name: meal-tracker-credentials
    creationPolicy: Owner
  data:
    # Discord
    - secretKey: DISCORD_TOKEN
      remoteRef:
        key: discord/bots/meal-tracker
        property: token
    # Anthropic
    - secretKey: ANTHROPIC_API_KEY
      remoteRef:
        key: family-manager-bot/anthropic
        property: api_key
    # PostgreSQL
    - secretKey: POSTGRES_PASSWORD
      remoteRef:
        key: postgres/admin-credentials
        property: password
    # FatSecret
    - secretKey: FATSECRET_CONSUMER_KEY
      remoteRef:
        key: fatsecret/api-credentials
        property: consumer_key
    - secretKey: FATSECRET_CONSUMER_SECRET
      remoteRef:
        key: fatsecret/api-credentials
        property: consumer_secret
