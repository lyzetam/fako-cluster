apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: lztechnology-secret
  namespace: lztechnology
spec:
  secretStoreRef:
    name: aws-secret-store
    kind: SecretStore
  target:
    name: lztechnology-secrets
    creationPolicy: Owner
    template:
      type: Opaque
      data:
        mail_host: "{{ .mail_host }}"
        mail_port: "{{ .mail_port }}"
        mail_username: "{{ .mail_username }}"
        mail_password: "{{ .mail_password }}"
        mail_encryption: "{{ .mail_encryption }}"
        mail_from_address: "{{ .mail_from_address }}"
  data:
  - secretKey: mail_host
    remoteRef:
      key: lztechnology/mail
      property: mail_host
  - secretKey: mail_port
    remoteRef:
      key: lztechnology/mail
      property: mail_port
  - secretKey: mail_username
    remoteRef:
      key: lztechnology/mail
      property: mail_username
  - secretKey: mail_password
    remoteRef:
      key: lztechnology/mail
      property: mail_password
  - secretKey: mail_encryption
    remoteRef:
      key: lztechnology/mail
      property: mail_encryption
  - secretKey: mail_from_address
    remoteRef:
      key: lztechnology/mail
      property: mail_from_address
  refreshInterval: 1h
