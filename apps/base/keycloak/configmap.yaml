apiVersion: v1
kind: ConfigMap
metadata:
  name: keycloak-configmap
  namespace: keycloak
data:
  # Hostname configuration
  KC_HOSTNAME: "https://auth.landryzetam.net"
  KC_HOSTNAME_STRICT: "false"
  KC_HTTP_ENABLED: "true"
  KC_PROXY: "edge"
  KC_PROXY_HEADERS: "xforwarded"
  
  # Database configuration
  KC_DB: "postgres"
  KC_DB_URL: "jdbc:postgresql://postgres-cluster-rw.postgres.svc.cluster.local:5432/keycloak"
  
  # Health and metrics
  KC_HEALTH_ENABLED: "true"
  KC_METRICS_ENABLED: "true"
  KC_HTTP_MANAGEMENT_PORT: "9000"
  
  # Clustering settings
  KC_CACHE_STACK: "kubernetes"
  JAVA_OPTS_APPEND: "-Djgroups.dns.query=keycloak-headless.keycloak.svc.cluster.local"
  
  # Database init container settings
  PGHOST: "postgres-cluster-rw.postgres.svc.cluster.local"
  PGPORT: "5432"
