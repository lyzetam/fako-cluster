# infrastructure/controllers/base/nvidia-gpu/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: nvidia-device-plugin
resources:
  - namespace.yaml
  - node-labeler-updated.yaml  # Updated labeler with better detection
  - runtime-installer.yaml     # Ensures NVIDIA runtime is configured
  - daemonset.yaml            # Device plugin daemonset
  - runtime-class.yaml        # RuntimeClass for GPU workloads
  - resource-quota.yaml       # Resource limits
  - monitoring.yaml           # Metrics service
  - gpu-node-exporter.yaml    # GPU metrics exporter